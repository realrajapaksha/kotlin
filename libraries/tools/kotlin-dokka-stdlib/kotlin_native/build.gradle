apply plugin: 'de.undercouch.download'
apply plugin: 'base'


// kotlin/libraries/tools/kotlin-dokka-stdlib  ->  kotlin/kotlin-native
final String kotlinNativeRootDir = rootProject.file( "../../../kotlin-native")
final File kotlinNativeLibsDir = new File(buildDir, "libs")

final boolean isTeamcityBuild = System.getenv("TEAMCITY_VERSION") != null

task extractLibs(type: Sync) {
  enabled = !isTeamcityBuild
  from file(new File(kotlinNativeRootDir, "dist/klib"))
  into file(new File(kotlinNativeLibsDir, "klib"))

  includeEmptyDirs = false
}

project.extensions.kotlin_native_root = kotlinNativeRootDir
project.extensions.kotlin_native_libs = kotlinNativeLibsDir
